use CreditBank
go
CREATE TABLE BlackList(
inn int primary key not null,
fio nvarchar(50)not null,
bank nvarchar(50)not null
)
go
INSERT INTO BlackList
VALUES (1000,N'Петров Иван Васильевич',
N'Приват банк,город Харьков, отделение №5')
INSERT INTO BlackList
VALUES (1001,N'Тров Иван Васильевич',
N'Кредо банк,город Харьков, отделение №4')
go
CREATE TABLE CreditsList(
inn int primary key not null,
cardNumber int not null check(cardNumber>=1000),
fio nvarchar(50)not null,
bank nvarchar(50)not null 
default (N'Кредит банк,г. Харьков, отделение №24'),
creditLimit money not null check(creditLimit>=1000),
currentLimit money not null default(0),
check (currentLimit<=creditLimit)
)
go
CREATE PROC TakeCredit
@inn int,@fio nvarchar(50),@money money
AS
--проверяем черные списки
if NOT EXISTS (SELECT BL.inn FROM dbo.BlackList BL WHERE BL.inn=@inn)
print N'заявка направлена на рассмотрение'
ELSE
BEGIN
print N'заявка отклонена, мы не работаем с черным списком'
SELECT BL.inn,BL.fio,BL.bank FROM dbo.BlackList BL WHERE BL.inn=@inn
END
exec TakeCredit 1000,N'Петров Иван Васильевич',20000
exec TakeCredit 1003,N'Сидоров Иван Петрович',50000